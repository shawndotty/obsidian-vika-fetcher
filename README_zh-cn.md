[English](README.md)

# Obsidian Vika Fetcher

该插件允许您将维格表（Vika）中的数据抓取到您的 Obsidian 仓库中，并根据维格表中的记录创建或更新笔记。

## 功能

-   **从维格表抓取：** 连接到指定的维格表和视图。
-   **创建和更新笔记：** 在您的仓库中自动创建新笔记或更新现有笔记。
-   **灵活配置：**
    -   为每个抓取源设置自定义名称。
    -   指定在您的仓库中保存笔记的目标路径。
    -   管理多个抓取源。
    -   导入和导出抓取源配置。
-   **基于日期的筛选：** 选择抓取所有笔记，或仅抓取特定时间范围内（例如，今天、过去3天、上周）更新的笔记。
-   **支持子文件夹：** 根据维格表中的字段将笔记整理到子文件夹中。
-   **自定义文件扩展名：** 为您的笔记指定文件扩展名（例如 `.md`、`.txt`）。

## 如何使用

### 1. 维格表（Vika.cn）设置

1.  **创建 Vika.cn 账户：** 如果您还没有账户，请在 [vika.cn](https://vika.cn) 注册。
2.  **生成 API 密钥：** 前往您的用户中心 -> 开发者配置，并生成一个新的 API 密钥。
3.  **创建维格表：** 在维格表中创建一个新的数据表。
4.  **设置必要字段：** 您的维格表 **必须** 包含以下字段：
    -   `Title` (单行文本): 您的笔记标题。这将用作文件名。
    -   `MD` (多行文本): Markdown 格式的笔记内容。
    -   `SubFolder` (单行文本, 可选): 如果您想将笔记保存在子文件夹中，请在此处指定文件夹名称。
    -   `UpdatedIn` (数字): 表示最后更新时间的时间戳（例如 Unix 时间戳）。这用于基于日期的筛选。
    -   `Extension` (单行文本, 可选): 笔记的文件扩展名（例如 "md", "txt"）。如果未提供，则默认为 "md"。
5.  **复制 URL：** 打开您刚刚创建的维格表，并从浏览器的地址栏复制 URL。它应该看起来像 `https://vika.cn/workbench/dst.../viw...`。

### 2. 插件安装与配置

1.  **安装 Vika Fetcher：**
    -   在 Obsidian 的设置中进入 `社区插件`。
    -   搜索 "Vika Fetcher" 并安装。
    -   启用该插件。
2.  **配置新的抓取源：**
    -   打开 "Vika Fetcher" 的插件设置。
    -   点击 `+ Add New Fetch Source`。
    -   **抓取源名称：** 为您的源指定一个描述性名称（例如，“我的维格笔记”）。
    -   **抓取源 URL：** 粘贴您之前复制的维格表 URL。
    -   **API 密钥：** 粘贴您的维格表 API 密钥。
    -   **目标路径：** 指定您 Obsidian 仓库中要保存笔记的文件夹（例如 `Vika Notes/Inbox`）。
    -   **包含在导出中：** 如果您希望在导出设置时包含此源，请勾选此项。
    -   点击 `Save`。
3.  **重新加载 Obsidian：** 更改设置后，最好重新加载 Obsidian。

### 3. 抓取您的笔记

1.  **打开命令面板：** 按 `Ctrl+P` (在 macOS 上为 `Cmd+P`)。
2.  **搜索命令：** 输入 "Vika Fetcher" 查看可用命令。
3.  **运行抓取命令：** 您将看到一个名为 `Fetch [您的源名称]` 的命令。选择它以开始抓取过程。
4.  **选择日期范围：** 将出现一个对话框，要求您选择抓取的日期范围。您可以选择抓取所有笔记或仅抓取最近更新的笔记。
5.  **完成：** 插件现在将从您的维格表抓取数据，并在您的仓库中创建或更新相应的笔记。您会看到指示进度的通知。

## 高级用法

### 管理抓取源

设置选项卡提供了一个基于卡片的界面来管理您的抓取源：

-   **编辑：** 点击铅笔图标编辑抓取源的详细信息。
-   **复制：** 点击复制图标，将抓取源的设置以 JSON 格式复制到剪贴板。这对于共享或备份单个源很有用。
-   **删除：** 点击垃圾桶图标移除一个抓取源。

### 导入和导出

-   **导出所有抓取源：** 点击此按钮，将所有抓取源配置（标记为“包含在导出中”的源）作为 JSON 数组复制到剪贴板。
-   **导入新的抓取源：** 点击此按钮，打开一个对话框，您可以在其中粘贴 JSON 配置（单个对象或对象数组）以添加新的抓取源。

## 贡献

如果您有任何建议或发现任何错误，请随时在 [GitHub 仓库](<Your GitHub Repo Link Here>) 提出问题或提交拉取请求。

## 许可证

该插件根据 [MIT 许可证](LICENSE) 获得许可。
